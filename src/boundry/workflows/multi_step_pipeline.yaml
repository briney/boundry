# Multi-step pipeline workflow
#
# A comprehensive pipeline that idealizes the structure, performs
# constrained minimization, designs sequences with LigandMPNN, and
# finishes with unconstrained relaxation.
#
# Usage:
#   boundry run multi_step_pipeline.yaml

input: input.pdb

steps:
  # Step 1: Fix backbone geometry
  - operation: idealize

  # Step 2: Constrained minimization to relieve clashes
  - operation: minimize
    params:
      constrained: true
      stiffness: 10.0

  # Step 3: Sequence design (all positions)
  - operation: mpnn
    params:
      temperature: 0.1
      model_type: ligand_mpnn

  # Step 4: Unconstrained relaxation of the designed structure
  - operation: relax
    params:
      n_iterations: 5
      constrained: false
      implicit_solvent: true
